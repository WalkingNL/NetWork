### 原文地址：https://www.gohacking.com/dns-hijacking/
### DNS劫持：什么是DNS劫持以及它如何运作

**DNS劫持**(有时也称DNS重定向)是一种恶意攻击，这种攻击通过修改一台电脑的TCP/IP设置，然后将其重定向到另一台有恶意行为的DNS服务器上。从而导致默认的DNS设置失效。换句话说，当一个攻击者获取到一台电脑的控制权后，就改变DNS设置，使之对应一台流氓DNS服务器。这样的一个过程被称为*DNS劫持*。

众所周知，DNS主要负责将用户域名转化为相应的IP地址，如域名"google.com"转化后为"74.125.235.46"。掌握DNS的含义及工作流程有助于更好的理解DNS劫持是什么。如果这是你首次听到这个概念，我推荐你阅读我的上一篇[博客](https://www.gohacking.com/how-dns-works/)，介绍了域名系统的运行原理。

### DNS劫持如何运作呢？
如前所述，DNS主要负责解析安全的域名(user friendly domain name)为与之对应的IP地址。而DNS服务器由ISP(互联网服务供应商)及许多其他的私人机构来运营维护。默认情况下，你的电脑所配置使用的DNS服务器是ISP。但在一些情况下，可能是类似谷歌这样的大神级公司。后者一般说来是安全的。

![img](https://www.gohacking.com/wp-content/uploads/2013/01/DNS-Hijacking.jpg)

但是，想象一种情况就是你的电脑被一名黑客或恶意的程序访问，电脑中原来默认的DNS设置被修改，导致你的电脑使用了一个经由这个黑客来运营维护的流氓DNS服务器(Rogue DNS Server)。这种情况一旦发生，该DNS服务器就可能将一些对你而言非常重要的网站域名，如银行、搜索引擎、社交网站，等转化为被病毒侵染的站点的IP地址。一旦你在浏览器地址栏键入一个网站的URL地址，返回的页面可能是伪造的。有些情况下，这会给你带来灾难性的后果。

### DNS劫持的危险是什么？
DNS劫持的危害并非单一、静态的。得取决于攻击者的意图。许多IPS，例如"OpenDNS"及"Comcast" 就利用DNS劫持的方式嵌入广告或采集客户数据。虽然表面上看起来无危害，但这样的做法本身就违背了DNS响应(DNS responses)背后的RFC标准。

除此之外，DNS劫持的危害还有以下：

**网址嫁接(Pharming)**：也称域欺骗，这类攻击是你所访问的目标网站会被重定向到另一个网站，而后者，是攻击者伪造的。例如，一位用户访问Facebook.com时，他就可能被重定向到包含大量弹窗或广告信息的网站里。黑客们制造这种攻击的目的一般是为了赚取广告费。

**Phishing(网络钓鱼)**：与域欺骗不同的地方在于，你会被重定位到一个携带有恶意程序的网站，而这个网站，在观感及视觉上，与你本来访问的目标网站极为一致。例如，一个用户登录他的银行账户时，如果被以这种方式劫持，你的重要隐私信息就可能被盗走。

### 如何预防DNS攻击呢？
其实，大多数情况下，攻击者都是利用木马(trojan horse)程序来执行DNS劫持。这些木马程序通常作为音视频的编解码器，视频下载程序，YoTube下载程序或者其他免费的工具进行分发。因此，为了安全起见，远离那些未经授权的网站所提供的免费下载程序。[DNSChanger](https://en.wikipedia.org/wiki/DNSChanger)就是一个类似的木马程序，曾经劫持了4百万台电脑，通过欺诈性的广告收入，攫取了大约14百万美元的利润。

故，绝对不能使用出厂设定的路由器密码，让攻击者无任何可乘之机通过利用默认密码达到修改你路由器的目的。针对这个主题更多的细节，你可以看下我的另一篇[博客](https://www.gohacking.com/hack-ethernet-adsl-router/)。

安装一个可靠的杀毒软件，并进行持续的更新。针对此类攻击，其可以为你的电脑提供非常好的保护。

### 如果你的电脑感染了此类病毒，该如何解决？
如果你怀疑你的电脑已经被诸如DNSChanger这样的病毒感染，也不要慌。解决此类攻击造成的危害非常简单容易。你必须要做的是，验证你当前的DNS设置确保你没有使用这个[黑名单](https://forms.fbi.gov/check-to-see-if-your-computer-is-using-rogue-DNS)中列出的IP地址。否则的话，根据你的ISP配置说明书，重新配置你的DNS。
